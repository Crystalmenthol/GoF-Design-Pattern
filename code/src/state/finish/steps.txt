1. Create interface class "GashaponState" :- insertCoin, ejectCoins, and spin.
2. Create Concrete classes for readyState, hasCoinState, readyToSpin, outOfCapsuleState that comform interface class.
3. Create key/values in Gashapon class to store states (avoid circular reference).

    private state: GashaponMachineState = GashaponMachineState.outOfCapsule;
    private states: GashaponDictionary = {
        [GashaponMachineState.ready]: new readyState(this),
        [GashaponMachineState.hasCoin]: new hasCoinState(this),
        [GashaponMachineState.readyToSpin]: new readyToSpinState(this),
        [GashaponMachineState.outOfCapsule]: new outOfCapsuleState(),
    };

4. Now. Start to implement methods for Concrete class.
    4.1 implement one-by-one concrete method based-on existing Gashapon code.
    4.2 Refactor Gashapon code when state needs to call Gashapon methods.
    4.3 Repeat until done all concrete state classes.